# 3 курс
# Денисов Александр Александрович
# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/types/ - папка с типизацией данных

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура MVP

Model-View-Presenter (MVP) — архитектурный шаблон, который разделяет приложение на три компонента: модель (данные), представление (UI) и презентатор (бизнес-логика).

## Логика приложения

### Инициализация:

* Загрузка товаров с API (GET /product/)

* Отрисовка главной страницы
### Карточка товара:
* Просмотр подробной информации
* Добавление товара в корзину


### Работа с корзиной:

* Удаление товаров

* Рассчёт общей суммы

#### Валидация данных перед оформлением:

   * Проверка наличия адреса

   * Наличие email и телефона

### Оформление заказа:

* Отправка данных на API (POST /order)

#### Обработка успешного заказа:

* Показ модального окна со статусом заказа

* Очистка корзины

### Обработка ошибок

# Классы


# Model
Ответственность:

* Работа с данными

* Валидация

* Бизнес-логика
### ApiService 
Класс, содержащий логику работы с сервером 

``` getProducts() ``` метод получения данных с сервера 

``` submitOrder(order) ``` метод отправки формы на сервер

### CartManager
Класс, содержащий логику работы корзины

``` addItem(product) ``` метод добавления товара в корзину

``` addItem(productId ``` метод удаления товара по его id

``` calculateTotalPrice() ``` метод подсчёта итоговой цены

``` getItems() ``` метод получения товаров в корзине



# View
Ответственность:

* Отрисовка UI

* Обработка пользовательских событий
## Родительские классы
### View
Базовый класс всех UI элементов

``` constructor (tagName, className) ``` - принимает на вход HTML тег и CSS класс

Методы

``` createElement(tagName, className) ``` - создаёт элемент DOM

``` addChild(child) ``` - при необходимости может добавить дочерние элементы

``` render() ``` - рендер компонента

``` init() ``` - базовый метод, в котором содержится вся логика инициализации UI элемента

### Modal 
Базовый класс для модальных окон

``` constructor (tagName, className) ``` - принимает на вход HTML тег и CSS класс

Методы

``` createElement(tagName, className) ``` - создаёт элемент DOM

``` setContent(content) ``` - добавляет контент в модальное окно

``` open() ``` - открывает модальное окно

``` close() ``` - закрывает модальное окно

``` init() ``` - базовый метод в котором содержится вся логика инициализации модального окна

## Дочерние классы

### HomePageView 

Класс главной страницы

``` init() ``` - базовый метод в котором содержится логика инициализации главной страницы

``` renderProducts() ``` - метод  рендера продуктов

### ProductCardView 
Класс карточки товара 

```constructor(product)``` - принимает на вход данные товара

Методы

``` init() ``` - базовый метод в котором содержится логика инициализации главной страницы

``` renderProducts() ``` - метод  рендера товаров

### CartModalView
Класс корзины

``` init() ``` - базовый метод в котором содержится логика инициализации элемента корзины

``` updateCart(items, total) ``` - метод обновления товаров и цены в корзине

### CartProductView 
Класс элемента товара в корзине
``` init() ``` - базовый метод в котором содержится логика инициализации элемента товара в корзине

### OrderFormModalStep1 
Класс формы первого шага заполнения заказа

``` onChange() ``` метод изменения данных формы 

``` validate() ``` метод валидации данных формы

### OrderFormModalStep2
Класс формы второго шага заполнения заказа

``` onChange() ``` метод изменения данных формы 

### SuccessModalView 
Класс модального окна успешного оформления заказа

``` init (total) ``` - инициализация модального окна успешного оформления заказа, отображение итоговой цены
# Presenter
Ответственность:

* Посредник между View и Model

* Обработка бизнес-логики

* Управление потоком данных

#### HomePresenter 
Класс, соединяющий логику отображения и бизнес-логику главной страницы

```loadProducts(view, apiService) ``` - метод подгрузки данных с сервера и их отображения

### CartPresenter
Класс, соединяющий логику отображения и бизнес-логику корзины товаров
``` constructor(parentView, cartManager, apiService) ``` на вход принимает элемент где надо отрендерить содержимое корзины и менеджера корзины 

``` handleChangeCart() ``` - метод изменения состояния корзины

``` handleChangeForm() ``` метод изменения состояния формы оформления заказа
